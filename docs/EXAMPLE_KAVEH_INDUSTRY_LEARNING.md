# ๐ญ ูุซุงู ฺฉุงุฑุจุฑุฏ: ุงุฏฺฏุฑ ุงุฒ ุตูุนุช ููุฒุงุช ุจุฑุง ููุงุฏ ฺฉุงูู

## ุณูุงุฑู

ุดูุง ูโุฎูุงูุฏ ููุงุฏ **ฺฉุงูู** (ฺฉุงุฑุฎุงูุฌุงุช ุชููุฏ ุดุดู) ุฑุง ุงุฑุฒุดโฺฏุฐุงุฑ ฺฉูุฏ.

ุณุณุชู Industry-Aware ฺฺฏููู ฺฉูฺฉ ูโฺฉูุฏุ

---

## ฺฏุงู 1: ุดูุงุณุง ุตูุนุช

```python
# ฺฉุงูู ุฏุฑ ฺฉุฏุงู ุตูุนุช ุงุณุชุ
GET /api/v1/companies/KAVEH

Response:
{
  "ticker": "ฺฉุงูู",
  "name": "ฺฉุงุฑุฎุงูุฌุงุช ุชููุฏ ุดุดู ฺฉุงูู",
  "industry": "ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ",
  "sector": "ุตูุงุน ูพุงู"
}
```

---

## ฺฏุงู 2: ุงุฏฺฏุฑ ุงุฒ ุตูุนุช

ุณุณุชู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุงุฒ ููุงุฏูุง ุฒุฑ ุฏุฑ ููู ุตูุนุช ุงุฏ ูโฺฏุฑุฏ:

### ููุงุฏูุง ุตูุนุช ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ:
1. **ุดูพูุง** (ูพุชุฑูุดู ูพุงุฑุณ)
2. **ูุงุฑุณ** (ุตูุนุช ูุงุฑุณ)
3. **ุดุงุฑุงฺฉ** (ุขุฑุงฺฉ)
4. **ูุตูุง** (ุตูุงูุงู)
5. **ฺฉุงูู** (ุดุดู ฺฉุงูู)

```python
# ุขููุฒุด ูุฏู ุจุฑุง ุงู ุตูุนุช
POST /api/v1/ml-ensemble/train-industry/ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ

Response:
{
  "industry": "ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ",
  "sector": "ุตูุงุน ูพุงู",
  "company_count": 5,
  "model_weights": {
    "dcf": 0.19,              // ฺฉู ฺฉูุชุฑ ุงุฒ ูพุดโูุฑุถ
    "eva": 0.21,              // ุจุงูุงุชุฑ - ุณุฑูุงูโุจุฑ ููู
    "graham_number": 0.18,    // ูุชูุณุท
    "rim": 0.16,
    "peter_lynch": 0.09,      // ูพุงู - ุฑุดุฏ ูุญุฏูุฏ
    "ncav": 0.08,
    "price_sales": 0.05,
    "price_cashflow": 0.04
  },
  "accuracy": 0.84,
  "best_models": ["eva", "dcf", "graham_number"]
}
```

### ุชูุณุฑ:
- **EVA ุจุงูุงุชุฑู ูุฒู**: ุตูุงุน ุณุฑูุงูโุจุฑ โ ุงุฑุฒุด ุงูุฒูุฏู ุงูุชุตุงุฏ ููู
- **Peter Lynch ูพุงู**: ุฑุดุฏ ฺฉูุฏ โ ูุฏู ุฑุดุฏ ฺฉูุชุฑ ููุฏ
- **DCF ูุงุจู ูุจูู**: ุฌุฑุงู ููุฏ ูุณุจุชุงู ูพุงุฏุงุฑ

---

## ฺฏุงู 3: ุฏุฑุงูุช ูุฒูโูุง ุจููู ุจุฑุง ฺฉุงูู

```python
GET /api/v1/ml-ensemble/company-weights/{kaveh_company_id}

Response:
{
  "company": {
    "id": "123e4567-e89b-12d3-a456-426614174000",
    "ticker": "ฺฉุงูู",
    "name": "ฺฉุงุฑุฎุงูุฌุงุช ุชููุฏ ุดุดู ฺฉุงูู",
    "industry": "ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ",
    "sector": "ุตูุงุน ูพุงู"
  },
  "optimized_weights": {
    "dcf": 0.19,
    "eva": 0.21,
    "graham_number": 0.18,
    "rim": 0.16,
    "peter_lynch": 0.09,
    "ncav": 0.08,
    "price_sales": 0.05,
    "price_cashflow": 0.04
  },
  "source": "industry-specific",  // ุงุฒ ุงุฏฺฏุฑ ุตูุนุช
  "best_models": ["eva", "dcf", "graham_number"],
  "interpretation_fa": "ุจุฑุง ฺฉุงูู ุฏุฑ ุตูุนุช ูุญุตููุงุช ฺฉุงู ุบุฑููุฒุ ุจูุชุฑู ูุฏูโูุง: eva, dcf, graham_number"
}
```

---

## ฺฏุงู 4: ุงุฑุฒุดโฺฏุฐุงุฑ ุจุง ูุฒูโูุง ุจููู

```python
POST /api/v1/ml-ensemble/{kaveh_company_id}
Content-Type: application/json

{
  "valuation_date": "2025-11-14",
  "risk_free_rate": 0.20,          // ูุฑุฎ ุจุฏูู ุฑุณฺฉ ุงุฑุงู
  "market_risk_premium": 0.08,
  "terminal_growth_rate": 0.15,    // ุฑุดุฏ ุจููุฏูุฏุช ุงุฑุงู
  "forecast_years": 5,
  "use_industry_weights": true     // ุงุณุชูุงุฏู ุงุฒ ูุฒูโูุง ุตูุนุช
}

Response:
{
  "company": {
    "ticker": "ฺฉุงูู",
    "industry": "ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ"
  },
  "ensemble_value": 15250.0,        // ุฑุงู
  "confidence_score": 86.5,
  "quality_score": 88.2,
  "recommendation": "BUY",
  
  "scenarios": {
    "bull": {
      "value": 18300.0,             // +20% ุตุนูุฏ
      "probability": 0.25,
      "description": "ุดุฑุงุท ุนุงู ุจุงุฒุงุฑุ ุฑุดุฏ ุชูุงุถุง"
    },
    "base": {
      "value": 15250.0,             // ุญุงูุช ูพุงู
      "probability": 0.50,
      "description": "ุดุฑุงุท ุนุงุฏ ุจุงุฒุงุฑ"
    },
    "bear": {
      "value": 12200.0,             // -20% ูุฒูู
      "probability": 0.25,
      "description": "ุฑฺฉูุฏุ ฺฉุงูุด ุชูุงุถุง"
    }
  },
  
  "model_results": {
    "dcf": {
      "base": 14800.0,
      "weight": 0.19,
      "contribution": 2812.0        // 14800 ร 0.19
    },
    "eva": {
      "base": 15900.0,
      "weight": 0.21,               // ุจุดุชุฑู ูุฒู
      "contribution": 3339.0        // 15900 ร 0.21
    },
    "graham_number": {
      "base": 14500.0,
      "weight": 0.18,
      "contribution": 2610.0
    },
    "rim": {
      "base": 15200.0,
      "weight": 0.16,
      "contribution": 2432.0
    },
    "peter_lynch": {
      "base": 16800.0,
      "weight": 0.09,               // ฺฉูุชุฑู ูุฒู
      "contribution": 1512.0
    },
    "ncav": {
      "base": 13200.0,
      "weight": 0.08,
      "contribution": 1056.0
    },
    "price_sales": {
      "base": 15800.0,
      "weight": 0.05,
      "contribution": 790.0
    },
    "price_cashflow": {
      "base": 14900.0,
      "weight": 0.04,
      "contribution": 596.0
    }
  },
  
  "learning_source": {
    "type": "industry-specific",
    "industry": "ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ",
    "symbols_used": ["ุดูพูุง", "ูุงุฑุณ", "ุดุงุฑุงฺฉ", "ูุตูุง", "ฺฉุงูู"],
    "total_data_points": 450,       // 5 ููุงุฏ ร 90 ุฑูุฒ
    "training_accuracy": 0.84
  },
  
  "interpretation_fa": "ุงุฑุฒุด ููุตูุงูู ฺฉุงูู 15,250 ุฑุงู ุจุง ุงุทููุงู 86.5%. ูุฏู EVA (ูุฒู 21%) ุจุดุชุฑู ุชุฃุซุฑ ุฑุง ุฏุงุฑุฏ ฺูู ุตูุนุช ุณุฑูุงูโุจุฑ ุงุณุช."
}
```

---

## ฺฏุงู 5: ููุงุณู ุจุง ูุฒูโูุง ุซุงุจุช

### โ ุจุง ูุฒูโูุง ุซุงุจุช (ูุฏู):
```python
Ensemble Value: 14,800 ุฑุงู
Confidence: 78%
Models: DCF=20%, EVA=15%, Graham=12%, ...
```

### โ ุจุง ูุฒูโูุง ุตูุนุช-ูุญูุฑ (ุฌุฏุฏ):
```python
Ensemble Value: 15,250 ุฑุงู  (+3%)
Confidence: 86.5%              (+8.5%)
Models: EVA=21%, DCF=19%, Graham=18%, ...
```

### ุฏูู ุจูุจูุฏ:
- **EVA**: ุงุฒ 15% ุจู 21% (ุณุฑูุงูโุจุฑ ุจุงูุง ุฏุฑ ุตูุนุช ุดุดู)
- **Peter Lynch**: ุงุฒ 12% ุจู 9% (ุฑุดุฏ ฺฉูุฏ ุฏุฑ ุงู ุตูุนุช)
- ุงุฏฺฏุฑ ุงุฒ 5 ููุงุฏ ูุดุงุจู โ ุงูฺฏููุง ุจูุชุฑ

---

## ฺฏุงู 6: ุจูุดโูุง ุตูุนุช

```python
GET /api/v1/ml-ensemble/industry-insights/ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ

Response:
{
  "industry": "ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ",
  "sector": "ุตูุงุน ูพุงู",
  "company_count": 5,
  "avg_accuracy": 0.84,
  
  "best_performing_models": ["eva", "dcf", "graham_number"],
  
  "volatility_score": 0.65,       // ููุณุงู ูุชูุณุท
  
  "growth_characteristics": {
    "avg_revenue_growth": 0.12,   // 12% ุฑุดุฏ ุณุงูุงูู
    "avg_roe": 0.18,              // 18% ุจุงุฒุฏู ุญููู ุตุงุญุจุงู ุณูุงู
    "avg_debt_ratio": 0.45        // 45% ูุณุจุช ุจุฏู
  },
  
  "industry_profile": {
    "capital_intensive": true,     // ุณุฑูุงูโุจุฑ
    "growth_stage": "mature",      // ุจุงูุบ
    "cash_flow_stability": "high", // ุฌุฑุงู ููุฏ ูพุงุฏุงุฑ
    "competition": "moderate"      // ุฑูุงุจุช ูุชูุณุท
  },
  
  "interpretation_fa": "ุตูุนุช ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ ุจุง 5 ุดุฑฺฉุช ุชุญูู ุดุฏ. ุจูุชุฑู ูุฏูโูุง: eva, dcf, graham_number. ูฺฺฏโูุง: ุณุฑูุงูโุจุฑุ ุฑุดุฏ ูุชูุณุทุ ุฌุฑุงู ููุฏ ูพุงุฏุงุฑ"
}
```

---

## ฺฏุงู 7: ููุงุณู ุจุง ุตูุงุน ูุดุงุจู

```python
GET /api/v1/ml-ensemble/compare-industries?industry1=ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ&industry2=ููุฒุงุช ุงุณุงุณ

Response:
{
  "industry1": {
    "name": "ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ",
    "sector": "ุตูุงุน ูพุงู",
    "accuracy": 0.84,
    "best_models": ["eva", "dcf", "graham_number"]
  },
  
  "industry2": {
    "name": "ููุฒุงุช ุงุณุงุณ",
    "sector": "ุตูุงุน ูพุงู",
    "accuracy": 0.87,
    "best_models": ["graham_number", "eva", "ncav"]
  },
  
  "similarity_score": 0.72,        // 72% ุดุจุงูุช
  "transferable": true,            // ูุงุจู ุงูุชูุงู
  
  "weight_differences": {
    "dcf": -0.01,                  // ุชูุฑุจุงู ฺฉุณุงู
    "eva": +0.01,                  // ุชูุฑุจุงู ฺฉุณุงู
    "graham_number": -0.04,        // ููุฒุงุช ุจุดุชุฑ ุงุณุชูุงุฏู ูโฺฉููุฏ
    "peter_lynch": +0.01,
    "ncav": -0.07                  // ููุฒุงุช ุจุดุชุฑ (ุฏุงุฑุงโูุญูุฑุชุฑ)
  },
  
  "interpretation_fa": "ุดุจุงูุช ุจู ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ ู ููุฒุงุช ุงุณุงุณ: 72%. ูุงุจู ุงูุชูุงู. ูุฑ ุฏู ุตูุนุช ุณุฑูุงูโุจุฑ ู ุฏุงุฑุงโูุญูุฑ ูุณุชูุฏ."
}
```

---

## ๐ ุฎูุงุตู ูุฒุงุง ุจุฑุง ฺฉุงูู

### 1๏ธโฃ ุฏูุช ุจุงูุงุชุฑ
- **+3%** ุฏุฑ ุงุฑุฒุดโฺฏุฐุงุฑ (15,250 vs 14,800)
- **+8.5%** ุฏุฑ ุงุทููุงู (86.5% vs 78%)

### 2๏ธโฃ ุดุฎุตโุณุงุฒ ุจุฑุง ุตูุนุช
- EVA ุจุงูุงุชุฑ (ุตูุนุช ุณุฑูุงูโุจุฑ)
- Peter Lynch ูพุงูโุชุฑ (ุฑุดุฏ ฺฉูุฏ)

### 3๏ธโฃ ุงุฏฺฏุฑ ุงุฒ ููุงุฏูุง ูุดุงุจู
- 5 ููุงุฏ ุฏุฑ ููู ุตูุนุช
- 450 ุฑูุฒโููุงุฏ ุฏุงุฏู

### 4๏ธโฃ ุจูุดโูุง ุตูุนุช
- ูฺฺฏโูุง ุฎุงุต ุตูุนุช
- ููุงุณู ุจุง ุตูุงุน ุฏฺฏุฑ

---

## ๐ฏ ูุชุฌูโฺฏุฑ

ุณุณุชู Industry-Aware Learning ุจุฑุง **ฺฉุงูู**:

โ ุงุฒ ุชุฌุฑุจุงุช **ุดูพูุงุ ูุงุฑุณุ ุดุงุฑุงฺฉุ ูุตูุง** ุงุฏ ฺฏุฑูุช  
โ ูุฒู **EVA** ุฑุง ุงูุฒุงุด ุฏุงุฏ (ุณุฑูุงูโุจุฑ ุจุงูุง)  
โ ูุฒู **Peter Lynch** ุฑุง ฺฉุงูุด ุฏุงุฏ (ุฑุดุฏ ฺฉูุฏ)  
โ ุฏูุช ุฑุง **+8.5%** ุงูุฒุงุด ุฏุงุฏ  
โ ุงุทููุงู ุฑุง **86.5%** ุฑุณุงูุฏ  

**ูุชุฌู:** ุงุฑุฒุดโฺฏุฐุงุฑ ุฏููโุชุฑ ู ูุงุจู ุงุชฺฉุงุชุฑ! ๐

---

## ๐ ฺฉุฏ ฺฉุงูู Python

```python
import requests
from datetime import date

# Base URL
BASE_URL = "http://localhost:8000/api/v1"

# 1. ุขููุฒุด ุตูุนุช
response = requests.post(
    f"{BASE_URL}/ml-ensemble/train-industry/ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ"
)
print("โ ุตูุนุช ุขููุฒุด ุฏุงุฏู ุดุฏ:", response.json())

# 2. ุฏุฑุงูุช ูุฒูโูุง ุจููู
kaveh_id = "123e4567-e89b-12d3-a456-426614174000"
response = requests.get(
    f"{BASE_URL}/ml-ensemble/company-weights/{kaveh_id}"
)
weights = response.json()["data"]["optimized_weights"]
print("โ ูุฒูโูุง ุจููู:", weights)

# 3. ุงุฑุฒุดโฺฏุฐุงุฑ
response = requests.post(
    f"{BASE_URL}/ml-ensemble/{kaveh_id}",
    json={
        "valuation_date": str(date.today()),
        "risk_free_rate": 0.20,
        "market_risk_premium": 0.08,
        "terminal_growth_rate": 0.15,
        "forecast_years": 5,
        "use_industry_weights": True
    }
)
result = response.json()["data"]
print(f"โ ุงุฑุฒุด ููุตูุงูู: {result['ensemble_value']:,.0f} ุฑุงู")
print(f"โ ุงุทููุงู: {result['confidence_score']:.1f}%")
print(f"โ ุชูุตู: {result['recommendation']}")

# 4. ุจูุดโูุง ุตูุนุช
response = requests.get(
    f"{BASE_URL}/ml-ensemble/industry-insights/ูุญุตููุงุช ฺฉุงู ุบุฑููุฒ"
)
insights = response.json()["data"]
print("โ ุจูุชุฑู ูุฏูโูุง:", insights["best_performing_models"])
```

---

**ูููู ุจุงุดุฏ!** ๐
